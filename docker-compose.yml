services:
  app:
    build: .
    container_name: umkm-backend-app
    restart: unless-stopped
    ports:
      - "5000:5000" # Mapping port container ke port host (host:container)
    environment:
      NODE_ENV: production
      PORT: 5000
      MONGODB_URI: mongodb://admin:ACCESS!def00@31.97.49.97:27017/def_db # Sesuaikan dengan URI MongoDB Anda
      JWT_SECRET: "your_jwt_secret_key" # Ganti dengan secret key Anda yang aman
      # Tambahkan variabel environment lainnya yang dibutuhkan oleh aplikasi Anda
      # Contoh:
      # API_KEY: "your_api_key"
    volumes:
      - .:/usr/src/app # Sinkronisasi kode lokal dengan container (untuk development)
      - /usr/src/app/node_modules # Pastikan node_modules di container tidak ditimpa
      - /usr/src/app/logs # Volume untuk menyimpan log
      - /usr/src/app/uploads # Volume untuk menyimpan file uploads
    networks:
      - main

networks:
  main:
    external: true
